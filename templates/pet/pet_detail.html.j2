{% extends 'base.html.j2' %}
{% load static %}

{% block stylesheet %}
    <link rel="stylesheet" type="text/css" href="{% static 'lib/magnific-popup/css/magnific-popup.css' %}" />
{% endblock %}

{% block content %}
<!-- Begin page content -->
<div class="container">
    <div class="page-header">
        <div class="pull-right">
            <div class="btn-group" role="group" aria-label="Basic example">
                {% if user.is_authenticated and user == pet.owner %}
                    <a href="{% url 'pet-update' userid=pet.owner.pk pk=pet.pk%}">
                        <button type="button" class="btn btn-default">정보수정</button>
                    </a>
                    <a href="{% url 'pet-delete' userid=pet.owner.pk pk=pet.pk %}">
                        <button type="button" class="btn btn-danger">삭제</button>
                    </a>
                {% endif %}
                <a href="{% url 'pet-list' userid=user.pk %}">
                    <button type="button" class="btn btn-default">목록으로</button>
                </a>
            </div>
        </div>
        <h1>펫 상세보기</h1>
    </div>
    <div class="col-xs-6 col-sm-4">
        <img src="{{ pet.image.url }}" class="img-responsive">
    </div>
    <div class="col-xs-6 col-sm-8">
        <h4 class="title">{{ pet.name }}</h4>
        <hr />
        <h5>동물분류 종 :  {{ pet.species.common_name_kor }} </h5>
        <h5>성별 : {{ pet.gender.item_name }} </h5>
        <h5>출생년월일 : {{ pet.bod }} </h5>
        <hr />
        <pre><h5>{{ pet.desc }}<h5></pre>
    </div>
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#carelog" data-toggle="tab" >사육일지</a></li>
        <li role="presentation" ><a href="#careinfo" data-toggle="tab" >정보</a></li>
    </ul>
    <div class="page-header">
        <div class="pull-right">
            <div class="btn-group" role="group" aria-label="Basic example">
                <a href="{% url 'care-add' userid=pet.owner.pk petid=pet.pk %}">
                    <button type="button" class="btn btn-success">일지등록</button>
                </a>
            </div>
        </div>
        <h3>사육일지</h3>
    </div>
    <div class="tab-content">
        <div id="carelog" class="tab-pane active">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col" class="d-none d-sm-table-cell">#</th>
                            <th scope="col">등록일자</th>
                            <th scope="col" class="d-none d-sm-table-cell">일지유형</th>
                            <th scope="col">추가내용</th>
                            <th scope="col" class="d-none d-sm-table-cell">사진</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for care in care_list %}
                        <tr>
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{ care.date}}</td>
                            <td>{{ care.type.item_name }}</td>
                            <td>{{ care.desc}}</td>
                            <td>
                                {% if care.image %}
                                    <a class="image-popup-no-margins" href="{{ care.image.url }}"><img src="{{ care.image.url }}" width="75" height="75"></a>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div id="careinfo" class="tab-pane">
            b
        </div>
    </div>
</div>

{% endblock %}

{% block script_content %}
    <script src="{% static 'lib/magnific-popup/jquery.magnific-popup.js' %}"></script>
    <script>
        $(document).ready(function() {
            /*
            $('.image-popup-vertical-fit').magnificPopup({
                type: 'image',
                closeOnContentClick: true,
                mainClass: 'mfp-img-mobile',
                image: {
                    verticalFit: true
                }

            });

            $('.image-popup-fit-width').magnificPopup({
                type: 'image',
                closeOnContentClick: true,
                image: {
                    verticalFit: false
                }
            });
            */
            $('.image-popup-no-margins').magnificPopup({
                type: 'image',
                closeOnContentClick: true,
                closeBtnInside: false,
                fixedContentPos: true,
                mainClass: 'mfp-no-margins mfp-with-zoom', // class to remove default margin from left and right side
                image: {
                    verticalFit: true
                },
                zoom: {
                    enabled: true,
                    duration: 300 // don't foget to change the duration also in CSS
                }
            });
        });
    </script>
{% endblock%}